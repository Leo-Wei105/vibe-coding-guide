# 第十一章：实战项目2 - 待办事项应用

> 📖 **难度等级**: ⭐⭐⭐ (中等)
> ⏰ **预计完成时间**: 1-2小时
> 🎯 **学习目标**: 创建一个功能完整的待办事项应用

---

## 🎯 项目介绍

### 我们要做什么

创建一个**功能完整的待办事项应用**，包含：

| 功能 | 描述 |
|-----|------|
| ➕ 添加任务 | 输入任务名称，点击添加 |
| ✅ 标记完成 | 点击复选框标记任务完成 |
| 🗑️ 删除任务 | 删除不需要的任务 |
| ✏️ 编辑任务 | 修改任务内容 |
| 📊 统计信息 | 显示已完成/未完成数量 |
| 💾 数据保存 | 刷新页面数据不丢失 |
| 🎨 美观界面 | 现代化的设计 |

### 学习目标

完成这个项目，你将学会：
- ✅ JavaScript基本编程
- ✅ DOM操作（页面元素操作）
- ✅ 事件处理（用户交互）
- ✅ 数据持久化（localStorage）
- ✅ 完整的应用开发流程

---

## 🚀 项目准备

### 技术选择

本项目使用**纯JavaScript**实现，不依赖框架。

```
技术栈：
- HTML5: 页面结构
- CSS3: 样式设计
- JavaScript: 逻辑和交互
- localStorage: 数据存储

为什么用纯JS？
- 简单易懂，适合学习
- 不需要额外安装
- 运行速度快
- 容易调试
```

### 项目结构

```
todo-app/
├── index.html      # 主页面
├── style.css       # 样式文件
├── app.js         # JavaScript逻辑
└── README.md      # 项目说明
```

### 功能规划

```
核心功能优先级：

P0（必须实现）：
✓ 添加任务
✓ 显示任务列表
✓ 标记完成/未完成
✓ 删除任务
✓ 数据保存

P1（重要）：
✓ 编辑任务
✓ 清空已完成任务
✓ 任务统计

P2（加分）：
✓ 拖拽排序
✓ 搜索过滤
✓ 任务分类/标签
```

---

## 📝 步骤1：创建项目结构

### 和AI对话

```

你：帮我创建一个待办事项应用项目

AI: 好的！我来帮你创建...

正在创建项目...
✓ todo-app 文件夹
✓ index.html - 主页面
✓ style.css - 样式文件
✓ app.js - JavaScript文件
✓ 基础结构已搭建完成
```

### 查看生成的文件

AI会生成三个文件，检查它们是否正确创建。

---

## 📝 步骤2：设计界面

### 给AI的需求

```

你：帮我设计待办事项应用的界面

界面要求：
1. 顶部标题区域，显示"我的待办事项"
2. 输入区域，包含：
   - 输入框（输入任务）
   - 添加按钮
3. 任务列表区域
4. 底部统计区域，显示：
   - 总任务数
   - 已完成数
   - 未完成数

样式要求：
- 简洁现代的设计
- 使用卡片式布局
- 任务项有悬停效果
- 已完成任务有删除线
- 响应式设计
```

### AI会生成HTML

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>待办事项应用</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>📝 我的待办事项</h1>

        <div class="input-section">
            <input
                type="text"
                id="taskInput"
                placeholder="输入新的待办事项..."
            >
            <button id="addBtn">添加</button>
        </div>

        <ul id="taskList" class="task-list">
            <!-- 任务会动态添加到这里 -->
        </ul>

        <div class="stats">
            <span>总计: <strong id="totalCount">0</strong></span>
            <span>已完成: <strong id="completedCount">0</strong></span>
            <span>未完成: <strong id="pendingCount">0</strong></span>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
```

### AI会生成CSS

```css
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Arial, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    padding: 20px;
}

.container {
    max-width: 600px;
    margin: 40px auto;
    background: white;
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
}

h1 {
    text-align: center;
    color: #333;
    margin-bottom: 30px;
}

.input-section {
    display: flex;
    gap: 10px;
    margin-bottom: 30px;
}

#taskInput {
    flex: 1;
    padding: 12px 15px;
    border: 2px solid #ddd;
    border-radius: 10px;
    font-size: 16px;
}

#taskInput:focus {
    outline: none;
    border-color: #667eea;
}

#addBtn {
    padding: 12px 25px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 500;
}

#addBtn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
}

.task-list {
    list-style: none;
}

.task-item {
    display: flex;
    align-items: center;
    padding: 15px;
    margin-bottom: 10px;
    background: #f8f8f8;
    border-radius: 10px;
    transition: all 0.3s;
}

.task-item:hover {
    background: #f0f0f0;
    transform: translateX(5px);
}

.task-item input[type="checkbox"] {
    width: 20px;
    height: 20px;
    margin-right: 15px;
    cursor: pointer;
}

.task-text {
    flex: 1;
    font-size: 16px;
}

.task-item.completed .task-text {
    text-decoration: line-through;
    color: #999;
}

.delete-btn {
    background: #ff6b6b;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 5px 12px;
    cursor: pointer;
    font-size: 14px;
}

.delete-btn:hover {
    background: #ff5252;
}

.stats {
    display: flex;
    justify-content: space-around;
    margin-top: 30px;
    padding-top: 20px;
    border-top: 2px solid #eee;
}

.stats span {
    color: #666;
}

.stats strong {
    color: #667eea;
    font-size: 18px;
}
```

---

## 📝 步骤3：实现JavaScript逻辑

### 和AI对话

```

你：现在帮我实现待办事项的功能

功能需求：
1. 点击添加按钮，把输入框的内容添加到列表
2. 每个任务有复选框，可以标记完成/未完成
3. 每个任务有删除按钮，可以删除
4. 已完成的任务显示删除线
5. 实时更新统计信息（总数、已完成、未完成）
6. 使用localStorage保存数据，刷新页面数据不丢失

代码要求：
- 添加必要的注释
- 代码清晰易读
- 包含错误处理
```

### AI会生成JavaScript

```javascript
// 从localStorage加载数据
function loadTasks() {
    const tasks = localStorage.getItem('tasks');
    return tasks ? JSON.parse(tasks) : [];
}

// 保存数据到localStorage
function saveTasks(tasks) {
    localStorage.setItem('tasks', JSON.stringify(tasks));
}

// 创建任务HTML元素
function createTaskElement(task) {
    const li = document.createElement('li');
    li.className = `task-item ${task.completed ? 'completed' : ''}`;
    li.setAttribute('data-id', task.id);

    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.checked = task.completed;
    checkbox.addEventListener('change', () => toggleTask(task.id));

    const span = document.createElement('span');
    span.className = 'task-text';
    span.textContent = task.text;

    const deleteBtn = document.createElement('button');
    deleteBtn.className = 'delete-btn';
    deleteBtn.textContent = '删除';
    deleteBtn.addEventListener('click', () => deleteTask(task.id));

    li.appendChild(checkbox);
    li.appendChild(span);
    li.appendChild(deleteBtn);

    return li;
}

// 渲染任务列表
function renderTasks(tasks) {
    const taskList = document.getElementById('taskList');
    taskList.innerHTML = '';

    tasks.forEach(task => {
        taskList.appendChild(createTaskElement(task));
    });

    updateStats(tasks);
}

// 添加新任务
function addTask() {
    const input = document.getElementById('taskInput');
    const text = input.value.trim();

    if (!text) {
        alert('请输入任务内容！');
        return;
    }

    const tasks = loadTasks();
    const newTask = {
        id: Date.now(), // 使用时间戳作为ID
        text: text,
        completed: false
    };

    tasks.push(newTask);
    saveTasks(tasks);
    renderTasks(tasks);

    input.value = ''; // 清空输入框
}

// 切换任务完成状态
function toggleTask(id) {
    const tasks = loadTasks();
    const task = tasks.find(t => t.id === id);

    if (task) {
        task.completed = !task.completed;
        saveTasks(tasks);
        renderTasks(tasks);
    }
}

// 删除任务
function deleteTask(id) {
    const tasks = loadTasks();
    const filteredTasks = tasks.filter(t => t.id !== id);
    saveTasks(filteredTasks);
    renderTasks(filteredTasks);
}

// 更新统计信息
function updateStats(tasks) {
    const total = tasks.length;
    const completed = tasks.filter(t => t.completed).length;
    const pending = total - completed;

    document.getElementById('totalCount').textContent = total;
    document.getElementById('completedCount').textContent = completed;
    document.getElementById('pendingCount').textContent = pending;
}

// 初始化
function init() {
    const tasks = loadTasks();
    renderTasks(tasks);

    // 绑定添加按钮事件
    document.getElementById('addBtn').addEventListener('click', addTask);

    // 绑定输入框回车事件
    document.getElementById('taskInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            addTask();
        }
    });
}

// 页面加载完成后初始化
document.addEventListener('DOMContentLoaded', init);
```

---

## 📝 步骤4：测试功能

### 测试列表

```
✅ 添加任务测试：
   [ ] 输入"学习编程"，点击添加
   [ ] 看任务是否出现在列表中
   [ ] 统计信息是否更新

✅ 标记完成测试：
   [ ] 点击任务的复选框
   [ ] 是否显示删除线
   [ ] 统计信息是否正确

✅ 删除任务测试：
   [ ] 点击删除按钮
   [ ] 任务是否从列表中消失
   [ ] 统计信息是否更新

✅ 数据持久化测试：
   [ ] 添加几个任务
   [ ] 刷新页面
   [ ] 任务是否还在
   [ ] 完成状态是否保持

✅ 边界情况测试：
   [ ] 输入空内容，点击添加
   [ ] 是否有提示
   [ ] 输入很长的内容
   [ ] 显示是否正常
```

---

## 🎨 步骤5：添加更多功能

### 功能1：编辑任务

```

和AI说：
"添加编辑功能，
双击任务文字可以编辑内容"

AI会添加：

1. 双击事件监听
2. 显示编辑输入框
3. 保存修改
4. 更新显示
```

### 功能2：清空已完成

```

和AI说：
"添加一个'清空已完成'按钮，
点击后删除所有已完成的任务"

AI会添加：

1. 按钮到统计区域
2. 点击事件处理
3. 筛选未完成任务
4. 重新渲染
```

### 功能3：任务优先级

```

和AI说：
"添加任务优先级功能，
可以设置高、中、低三个优先级，
用不同颜色显示"

AI会添加：

1. 优先级选择器
2. 颜色样式（高=红，中=黄，低=绿）
3. 优先级数据存储
4. 显示优先级标签
```

### 功能4：搜索过滤

```

和AI说：
"添加搜索功能，
可以输入关键词过滤任务列表"

AI会添加：

1. 搜索输入框
2. 搜索事件监听
3. 过滤任务列表
4. 实时更新显示
```

---

## 🎨 步骤6：美化界面

### 添加动画效果

```

和AI说：
"给任务添加淡入动画，
添加新任务时平滑显示"

AI会添加CSS动画：

```css
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.task-item {
    animation: slideIn 0.3s ease-out;
}
```

### 深色模式

```

和AI说：
"添加深色模式切换功能"

这会涉及：
- 切换按钮
- CSS变量
- 主题切换逻辑
```

---

## 📱 步骤7：响应式优化

### 测试移动端

```

在手机上测试：

[ ] 输入框是否太大？
[ ] 按钮是否容易点击？
[ ] 列表是否拥挤？
[ ] 统计信息是否正常？

有问题就告诉AI修复！
```

### 常见移动端问题

```

问题：按钮太小不容易点击

和AI说：
"在手机上按钮太小了，
请增大触摸区域"

问题：输入框高度不够

和AI说：
"增加输入框的高度，
方便移动端输入"
```

---

## ✅ 项目完成检查

```

功能完整性：
☐ 所有P0功能都实现了
☐ 数据能正确保存和加载
☐ 所有操作都有反馈

用户体验：
☐ 界面美观现代
☐ 操作流畅自然
☐ 没有明显的bug
☐ 在手机上也能正常使用

代码质量：
☐ 代码格式规范
☐ 有必要的注释
☐ 没有重复代码
☐ 错误处理完善
```

---

## 🎓 项目总结

### 你学到了什么

| 技能 | 说明 |
|-----|------|
| DOM操作 | 创建、修改、删除页面元素 |
| 事件处理 | 处理用户点击、输入等交互 |
| 数据管理 | 数组操作、对象处理 |
| 数据持久化 | localStorage的使用 |
| 状态管理 | 更新UI反映数据变化 |
| 完整应用 | 从设计到实现的全过程 |

### 代码理解检查

```

检查你对代码的理解：

Q1: localStorage是什么？有什么作用？
Q2: 为什么要用时间戳作为任务ID？
Q3: addTask函数做了哪些事情？
Q4: 任务的数据结构是什么样的？
Q5: 如何添加一个新功能？

如果不确定，问AI！
```

---

## 💡 进阶功能

### 挑战1：拖拽排序

```

和AI说：
"添加拖拽功能，
可以拖动任务改变顺序"

这是高级功能，涉及：
- 拖拽事件（dragstart, dragover, drop）
- 重新排序数组
- 更新存储
```

### 挑战2：任务分类

```

和AI说：
"添加任务分类功能，
可以有工作、学习、生活等分类"

这需要：
- 分类选择器
- 分类筛选
- 分类统计
```

### 挑战3：导出/导入

```

和AI说：
"添加导出和导入功能，
可以把任务保存为文件，也能从文件导入"

这会涉及：
- JSON文件操作
- 文件上传/下载
- 数据格式转换
```

---

## 📖 代码详解：JavaScript核心逻辑

### 理解数据存储

```javascript
/*
  localStorage 是浏览器提供的本地存储功能
  就像一个小型数据库，数据会一直保存在浏览器中
  即使关闭浏览器，再打开数据还在！
*/

// 存储数据 - 把任务列表变成文字保存起来
function saveTodos() {
    // JSON.stringify 把数组变成字符串（因为localStorage只能存字符串）
    localStorage.setItem('todos', JSON.stringify(todos));
}

// 读取数据 - 把保存的文字变回任务列表
function loadTodos() {
    const saved = localStorage.getItem('todos');  // 获取保存的字符串
    if (saved) {
        // JSON.parse 把字符串变回数组
        todos = JSON.parse(saved);
    } else {
        todos = [];  // 如果没有保存过，就是空数组
    }
}
```

### 理解事件处理

```javascript
/*
  事件处理就像"遥控器"——按下按钮，触发动作
  常见事件：click(点击)、input(输入)、submit(提交)
*/

// 点击按钮添加任务
addButton.addEventListener('click', function() {
    // 当用户点击按钮时，这里的代码会执行
    const text = input.value.trim();  // 获取输入框的内容，trim()去掉前后空格
    
    if (text === '') {
        alert('请输入任务内容！');  // 如果是空的，提示用户
        return;  // 结束函数，不继续往下执行
    }
    
    // 创建新任务对象
    const newTodo = {
        id: Date.now(),        // 用当前时间戳作为唯一ID
        text: text,            // 任务内容
        completed: false,      // 是否完成，默认未完成
        createdAt: new Date()  // 创建时间
    };
    
    todos.push(newTodo);  // 把新任务添加到数组末尾
    saveTodos();          // 保存到本地
    renderTodos();        // 重新渲染页面
    input.value = '';     // 清空输入框
});
```

### 理解DOM渲染

```javascript
/*
  DOM渲染就是把数据"画"到页面上
  每次数据变化，就重新"画"一遍
*/

function renderTodos() {
    // 先清空列表区域
    todoList.innerHTML = '';
    
    // 遍历每个任务，创建对应的HTML
    todos.forEach(function(todo) {
        // 创建一个<li>元素
        const li = document.createElement('li');
        
        // 如果任务已完成，添加完成样式
        if (todo.completed) {
            li.classList.add('completed');
        }
        
        // 设置li的内容
        li.innerHTML = `
            <input type="checkbox" ${todo.completed ? 'checked' : ''}>
            <span>${todo.text}</span>
            <button class="delete-btn">删除</button>
        `;
        
        // 把li添加到列表中
        todoList.appendChild(li);
    });
    
    // 更新统计信息
    updateStats();
}
```

### JavaScript常用方法速查

| 方法 | 作用 | 例子 |
|------|------|------|
| `array.push(item)` | 在数组末尾添加元素 | `todos.push(newTodo)` |
| `array.filter(fn)` | 过滤数组，保留符合条件的 | `todos.filter(t => !t.completed)` |
| `array.find(fn)` | 找到第一个符合条件的元素 | `todos.find(t => t.id === id)` |
| `array.forEach(fn)` | 遍历数组每个元素 | `todos.forEach(t => console.log(t))` |
| `JSON.stringify()` | 把对象变成字符串 | `JSON.stringify(todos)` |
| `JSON.parse()` | 把字符串变成对象 | `JSON.parse(savedData)` |

---

## 🧪 试一试：扩展你的应用

### 练习1：添加任务优先级

```prompt
请帮我给待办事项应用添加优先级功能：

需求：
- 每个任务可以设置优先级：高、中、低
- 添加任务时可以选择优先级
- 任务列表按优先级排序显示
- 高优先级用红色标记
- 中优先级用黄色标记
- 低优先级用绿色标记

请修改现有代码，并解释你改了哪些地方。
```

### 练习2：添加截止日期

```prompt
请给待办事项添加截止日期功能：

需求：
- 添加任务时可以设置截止日期（可选）
- 显示剩余天数
- 即将到期（3天内）的任务用橙色提醒
- 已过期的任务用红色显示
- 可以按截止日期排序

请修改现有代码。
```

### 练习3：添加搜索功能

```prompt
请给待办事项添加搜索功能：

需求：
- 添加一个搜索框
- 输入时实时过滤显示匹配的任务
- 搜索不区分大小写
- 清空搜索框时显示所有任务
- 高亮显示匹配的文字

请修改现有代码。
```

---

## ⚠️ 避坑指南：待办事项常见问题

### ❌ 问题1：数据不保存

**症状**：刷新页面后任务消失

**解决方法**：
```javascript
// 确保每次数据变化后都调用 saveTodos()
function addTodo(text) {
    todos.push({ id: Date.now(), text, completed: false });
    saveTodos();  // 别忘了这行！
    renderTodos();
}

// 确保页面加载时调用 loadTodos()
window.onload = function() {
    loadTodos();   // 先加载数据
    renderTodos(); // 再渲染页面
};
```

### ❌ 问题2：删除不了任务

**可能原因**：ID匹配不正确

**解决方法**：
```javascript
// 确保比较ID时类型一致
function deleteTodo(id) {
    // 注意：从DOM获取的ID可能是字符串，需要转换
    todos = todos.filter(todo => todo.id !== Number(id));
    saveTodos();
    renderTodos();
}
```

### ❌ 问题3：复选框点击没反应

**解决方法**：使用事件委托
```javascript
// 在父元素上监听事件，而不是每个复选框
todoList.addEventListener('change', function(e) {
    if (e.target.type === 'checkbox') {
        const todoId = e.target.closest('li').dataset.id;
        toggleTodo(todoId);
    }
});
```

### 💡 调试技巧

```javascript
// 在关键位置添加console.log查看数据状态
function addTodo(text) {
    console.log('添加前的todos:', todos);
    const newTodo = { id: Date.now(), text, completed: false };
    console.log('新任务:', newTodo);
    todos.push(newTodo);
    console.log('添加后的todos:', todos);
    saveTodos();
    renderTodos();
}
```

---

## 📝 本章小结

### 项目成果

完成这个项目，你拥有了：
- ✅ 一个功能完整的待办事项应用
- ✅ 可以实际使用的工具
- ✅ JavaScript编程基础
- ✅ 完整应用开发经验

### 本章学到的魔法咒语

| 场景 | 咒语示例 |
|------|----------|
| 添加功能 | "帮我添加[功能名]，需求是..." |
| 修复bug | "删除功能不工作，错误是...，请帮我修复" |
| 优化体验 | "怎么让这个操作更流畅？" |
| 学习概念 | "请解释localStorage是怎么工作的" |

### 从这个项目到下一个项目

```
你学会了：
1. 数据结构设计 - 用对象和数组组织数据
2. DOM操作 - 用JavaScript操作页面元素
3. 事件处理 - 响应用户的操作
4. 数据持久化 - 用localStorage保存数据
5. 完整应用开发流程 - 从需求到实现
```

### 思考题

1. 你最喜欢这个应用的哪个功能？
2. 你还想要添加什么功能？
3. 如果要给别人用，还需要什么？
4. **动手题**：用"练习1"给任务添加优先级功能！

---

## 🚀 下一章预告

完成待办事项应用后，你已经有能力做更复杂的项目了！下一章我们将做数据可视化工具，学习如何用图表展示数据。

准备好进入下一个挑战了吗？📊

---

## 📚 参考资料

- [How to Build an App with AI in 2026 as a Beginner](https://www.youtube.com/watch?v=4FjleDsZlmo)
- [How I'd Learn Coding in 2026 (Beginner's Guide)](https://www.youtube.com/watch?v=U-L7ZkROK2Q)
- [My LLM coding workflow going into 2026](https://medium.com/@addyosmani/my-llm-coding-workflow-going-into-2026-52fe1681325e)
- [Best AI Coding Assistant for Beginners: 2026 Complete Guide](https://zoer.ai/posts/zoer/best-ai-coding-assistant-beginners-guide-2026)
- [Getting Started with AI in 2026: The New Path](https://yuv.ai/learn/getting-started-ai-2026)
